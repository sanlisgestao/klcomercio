<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='UTF-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>

    <meta name='description' content='Website'>
    <meta name='author' content='Angelita Santos'>
    <meta name='keyWords' content='website'>
    <meta name='robots' content='index, follow'>
    <meta name='classification' content='site, website'>

    <title></title>

    <link rel='shortcut icon' href='../../static/img/logo.png' type='image/x-icon'>
    <script src='../../static/painel/cdn/jquery-3.7.0.js'></script>
    <link rel='stylesheet' href='../../static/painel/cdn/bootstrap-icons.css'>
    <link rel='stylesheet' href='../../static/painel/css/painel.css'>
    <link rel='stylesheet' href='../../static/painel/bootstrap/css/bootstrap.css'>
    <link rel='stylesheet' href='../../static/painel/bootstrap/css/bootstrap-grid.css'>
    <link rel='stylesheet' href='../../static/painel/bootstrap/css/bootstrap-reboot.css'>
</head>

<body class='container-fluid'>

    <header id='nav-navbar'></header>

    <main class='mt-2 mb-5'>
        
        <form action='' id='form-action' method='post' class='needs-validation' novalidate name='formulario'>

            <section class='card'>

                <header class='card-header text-center bg-success text-light'>
                    <section class='row mt-3'>

                        <div class='col-sm-9 mb-2'>
                            <h3 class=''>COMPRA</h3>
                        </div>

                        <div class=''>
                            <input type='hidden' class='form-control text-center' name='tipo_registro' value='COMPRA'>
                        </div>

                        <div class='col-sm-3'>
                            <div class='input-group mb-1'>
                                <span class='input-group-text'>Tipo</span>
                                <select class='form-control' name='finalidade' id='dropdownFinalidade'
                                    autocomplete='off'>
                                </select>
                            </div>
                        </div>

                    </section>
                </header>

                <div class='card-body'>

                    <section class='row'>

                        <div class='col-sm-4'>
                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Número</span>
                                <input type='text' class='form-control text-center' id='inv_no' name='inv_no'
                                    autocomplete='off' required>
                                <div class='input-group-append'>
                                    <button class='btn btn-outline-secondary' type='button'
                                        onclick='SearchRegistros();'><i class='bi bi-search'></i></button>
                                </div>
                                <div class='invalid-tooltip'>
                                    Por favor, coloque um número válido.
                                </div>
                            </div>

                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Data</span>
                                <input type='date' class='form-control text-center' name='reg_dt'>
                            </div>

                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Status Reg</span>
                                <select class='form-control status_registro' name='status_registro' id='dropdownStatusRegistro'></select>
                            </div>

                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Comprador</span>
                                <input type='hidden' class='form-control' name='id_seller' value='1'>
                                <input autocomplete='off' type='text' class='form-control' name='seller' value='GERAL'>
                                <div class='input-group-append'>
                                    <button class='btn btn-outline-secondary' type='button'
                                        onclick='ShowAllDataSellers();'><i class='bi bi-search'></i></button>
                                </div>
                            </div>

                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Conta</span>
                                <input type='hidden' class='form-control' name='id_conta' value='1'>
                                <input autocomplete='off' type='text' class='form-control' name='conta' value='GERAL'>
                                <div class='input-group-append'>
                                    <button class='btn btn-outline-secondary' type='button'
                                        onclick='ShowAllDataContas();'><i class='bi bi-search'></i></button>
                                </div>
                            </div>

                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Centro Custo</span>
                                <input type='hidden' class='form-control' name='id_ccusto' value='1'>
                                <input list='dropdownSellerList' autocomplete='off' type='text' class='form-control'
                                    name='centro_custo' value='GERAL'>
                                <div class='input-group-append'>
                                    <button class='btn btn-outline-secondary' type='button'
                                        onclick='ShowAllDataSellers();'><i class='bi bi-search'></i></button>
                                </div>
                            </div>
                        </div>

                        <div class='col-sm-8'>
                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Parceiro</span>
                                <input type='text' class='text-center input-group-text' style='width: 100px;'
                                    name='id_partner' value='1'>
                                <input type='text' class='form-control' name='partner' required minlength='4'
                                    value='CONSUMIDOR'>
                                <div class='input-group-append'>
                                    <button class='btn btn-outline-secondary busca' type='button'
                                        onclick='ShowAllDataPartners();'><i class='bi bi-search'></i></button>
                                </div>
                                <div class='invalid-tooltip'>
                                    Por favor, coloque um nome de parceiro válido. Mínimo 4 caracteres.
                                </div>
                            </div>

                            <div class='row'>
                                <div class='col-sm-6'>
                                    <div class='input-group mb-2'>
                                        <span class='input-group-text'>CNPJ/CPF</span>
                                        <input type='text' class='form-control' name='cnpj_cpf'>
                                    </div>
                                </div>
                                <div class='col-sm-6'>
                                    <div class='input-group mb-2'>
                                        <span class='input-group-text'>IE/RG</span>
                                        <input type='text' class='form-control' name='ie_rg'>
                                    </div>
                                </div>
                            </div>

                            <div class='row'>
                                <div class='col-sm-7'>
                                    <div class='input-group mb-2'>
                                        <span class='input-group-text'>Endereço</span>
                                        <input type='text' class='form-control' name='address'>
                                    </div>
                                </div>
                                <div class='col-sm-5'>
                                    <div class='input-group mb-2'>
                                        <span class='input-group-text'>Bairro</span>
                                        <input type='text' class='form-control' name='district'>
                                    </div>
                                </div>
                            </div>

                            <div class='row'>
                                <div class='col-sm-7'>
                                    <div class='input-group mb-2'>
                                        <span class='input-group-text'>Cidade</span>
                                        <input type='text' class='form-control' name='city'>
                                    </div>
                                </div>
                                <div class='col-sm-5'>
                                    <div class='input-group mb-2'>
                                        <span class='input-group-text'>CEP</span>
                                        <input type='text' class='form-control text-center' name='zipcode'>
                                    </div>
                                </div>
                            </div>

                            <div class='row'>
                                <div class='col-sm-7'>
                                    <div class='input-group mb-2'>
                                        <span class='input-group-text'>E-mail</span>
                                        <input type='text' class='form-control' name='email'>
                                    </div>
                                </div>
                                <div class='col-sm-5'>
                                    <div class='input-group mb-2'>
                                        <span class='input-group-text'>Telefone</span>
                                        <input type='text' class='form-control' name='phone'>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </section>

                    <input type='hidden' name='IsNew' id='IsNew' value='Y'>
                    <input type='hidden' name='StartRow' id='StartRow' value='0'>
                    <input type='hidden' name='RowCount' id='RowCount' value='0'>

                    <table class='table table-sm table-responsive-sm table-bordered my-3'>
                        <col class=m01>
                        <col class=m02>
                        <col class=m03>
                        <col class=m04>
                        <col class=m05>
                        <col class=m06>
                        <col class=m07>
                        <col class=m08>
                        <col class=m09>
                        <thead class='table-dark'>
                            <tr>
                                <th scope='col' class='text-center'>Seq</th>
                                <th scope='col' class='text-center'>Código</th>
                                <th scope='col' class='text-center'>Item</th>
                                <th scope='col' class='text-center'>Qtd</th>
                                <th scope='col' class='text-center'>Pr Unit</th>
                                <th scope='col' class='text-center'>Total Bruto</th>
                                <th scope='col' class='text-center'>Desc %</th>
                                <th scope='col' class='text-center'>Desc Valor</th>
                                <th scope='col' class='text-center'>Total Liquido</th>
                                <th scope='col' class='no-print'>
                                    <button type='button' class='btn btn-sm btn-warning' onclick='BtnAdd();'>+</button>
                                </th>
                            </tr>
                        </thead>
                        <tbody id='TBody'>
                            <tr id='TRow' class='d-none'>
                                <th scope='row' class='text-center'></th>
                                <td><input type='text' class='form-control text-center table-width-qty' name='id_item'
                                        autocomplete='off' required></td>
                                <td>
                                    <input type='text' class='form-control table-width-text' name='item_nm'
                                        list='datalistItemList' autocomplete='off' required>
                                    <div class='invalid-feedback'>
                                        Include 1 item
                                    </div>
                                    <datalist id='datalistItemList'></datalist>
                                </td>
                                <input type='hidden' class='form-control text-center' name='lot'>
                                <input type='hidden' class='form-control text-center' name='validate'>
                                <td><input type='number' class='form-control text-right table-width-qty' name='qty'
                                        min='1' required onchange='Calc(this);' onmouseenter='Calc(this);'>
                                    <p class='invalid-feedback'>
                                        Coloque uma quantidade válida.
                                    </p>
                                </td>
                                <td><input type='number' class='form-control text-right table-width-value' name='price'
                                        min='0.00' max='100.000.00' step='0.01' autocomplete='off'
                                        onchange='Calc(this);' onmouseenter='Calc(this);'>
                                    <p class='invalid-feedback'>
                                        Coloque um preço válido.
                                    </p>
                                </td>
                                <td><input type='number' class='form-control text-right table-width-value' name='amt'
                                        disabled min='0.00' max='100.000.00' step='0.01'>
                                </td>
                                <td><input type='number' class='form-control text-right table-width-value'
                                        name='disc_perc' min='0.00' max='100.000.00' step='0.01'
                                        onchange='CalcDisc(this);' onmouseenter='Calc(this);'>
                                </td>
                                <td><input type='number' class='form-control text-right table-width-value'
                                        name='disc_value' min='0.00' max='100.000.00' step='0.01'
                                        onchange='CalcDisc(this);' onmouseenter='Calc(this);'>
                                </td>
                                <td><input type='number' class='form-control text-right table-width-value'
                                        name='amt_liq' disabled min='0.00' max='100.000.00' step='0.01'>
                                </td>
                                <td class='no-print'><button type='button' class='btn btn-sm btn-danger'
                                        onclick='BtnDel(this);'>X</button></td>
                            </tr>

                        </tbody>
                    </table>

                </div>

                <footer class='card-body'>
                    <section class='row'>

                        <div class='col-sm-4'>
                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Total Itens</span>
                                <input type='text' class='form-control text-center' id='RegTItem' name='reg_total_itens' disabled>
                            </div>
                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Acrescimo</span>
                                <input type='number' class='form-control text-right' id='RegAdd' name='vr_acrescimo' 
                                    min='0.00' step='0.01' onchange='GetTotal()'>
                            </div>
                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Desconto</span>
                                <input type='number' class='form-control text-right' id='RegDiscount' name='vr_desconto' 
                                    min='0.00' step='0.01' onchange='GetTotal()'>
                            </div>
                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Total Geral</span>
                                <input type='text' class='form-control text-center' id='RegTotal' name='reg_total' disabled>
                            </div>
                        </div>

                        <div class='col-sm-4'>

                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Tipo Pgto</span>
                                <input list='dropdownTipoPgto' autocomplete='off' type='text'
                                    class='form-control text-center' id='TipoPgto' name='tipo_pgto'>
                                <datalist id='dropdownTipoPgto'></datalist>
                            </div>

                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Cond Pgto</span>
                                <input type='text' class='form-control text-center' id='CondPgto' name='cond_pgto'
                                    value='A VISTA'>
                                <div class='input-group-append'>
                                    <button class='btn btn-outline-secondary busca' type='button'
                                        onclick='ShowAllDataCondPgto();'><i class='bi bi-search'></i></button>
                                </div>
                            </div>

                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Qtd Parc</span>
                                <input type='number' class='text-center input-group-text' id='QtdParc' name='qtd_parc'
                                    min='1' step='1' value='1'>
                                <span class='input-group-text ml-1'>Prazo Parc</span>
                                <input type='number' class='text-center input-group-text' id='PrazoParc'
                                    name='prazo_parc' min='1' step='1' value='1'>
                            </div>

                            <div class='input-group mb-2'>
                                <span class='input-group-text'>Status Pgto</span>
                                <select class='form-control status_pgto' name='status_pgto' id='dropdownStatusPgto'></select>
                            </div>

                        </div>

                        <div class='col-sm-4'>

                            <div class='row text-center mt-3 mb-4'>
                                <div class='col-sm-6'>
                                    <button type='submit' class='btn btn-primary px-3 my-1'
                                        onclick='validar()'>Salvar</button>
                                </div>
                                <div class='col-sm-6'>
                                    <a href='../../templates/read/list-compras.html'>
                                        <button type='button' class='btn btn-danger px-3 my-1'>Cancelar
                                        </button>
                                    </a>
                                </div>
                            </div>

                            <div class='row text-center'>
                                <div class='col-sm-6'>
                                    <button type='button' class='btn px-2 my-1 btn-success'
                                        onclick='GetPrint();'>Imprimir</button>
                                </div>
                                <div class='col-sm-6'>
                                    <button type='button' class='btn px-2 my-1 btn-success'
                                        onclick='ShowAllDataRegistros()'>Lista Compras
                                    </button>
                                </div>
                            </div>

                        </div>

                    </section>
                </footer>

            </section>

        </form>

        <section id='nav-breadcrumb-cadastros'>
            <script type='text/javascript' src='../../static/painel/js/load.js'></script>
        </section>

    </main>

    <section>
        <div id='modal-ListaRegistros'></div>
        <div id='modal-ListaParceiros'></div>
        <div id='modal-ListaVendedores'></div>
        <div id='modal-ListaContas'></div>
        <div id='modal-ListaCondPgto'></div>
        <div id='modal-ListaCentroCusto'></div>
    </section>

    <script src='https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js'></script>
    <script src='https://www.gstatic.com/firebasejs/9.6.7/firebase-auth-compat.js'></script>
    <script src='../../static/painel/js/firebase-init.js'></script>
    <script src='../../static/painel/js/auth-guard.js'></script>

    <script type='text/javascript' src='../../static/painel/js/load.js'></script>
    <script type='text/javascript' src='../../static/painel/js/global/versao_title.js'></script>

    <script type='text/javascript' src='../../static/painel/js/modules/register-action.js'></script>
    <script type='text/javascript' src='../../static/painel/js/modules/data-listas-fill.js'></script>
    <!--
    <script type='text/javascript' src='../../static/js/modules/show-data-cadastros.js'></script>
    <script type='text/javascript' src='../../static/js/modules/show-data-compras.js'></script>
    -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js'
        integrity='sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49'
        crossorigin='anonymous'></script>
    <script type='text/javascript' src='../../static/painel/bootstrap/js/bootstrap.js'></script>
    <script type='text/javascript' src='../../static/painel/bootstrap/js/bootstrap.bundle.js'></script>

</body>

</html>